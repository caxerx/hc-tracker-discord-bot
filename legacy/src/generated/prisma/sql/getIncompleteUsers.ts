
/* !!! This is code generated by Prisma. Do not edit directly. !!! */
/* eslint-disable */
// biome-ignore-all lint: generated file
// @ts-nocheck 
import * as $runtime from "@prisma/client/runtime/client"

/**
 * @param raidDate
 */
export const getIncompleteUsers = $runtime.makeTypedQueryFactory("\nWITH user_characters AS (\nSELECT DISTINCT\n\"registerDiscordUserId\" as \"discordUserId\",\nid as \"characterId\"\nFROM \"RegisterCharacter\"\nWHERE \"registerDate\" <= $1::date\nAND \"unregisterDate\" >= $1::date\n),\nuser_completions AS (\nSELECT\nuc.\"discordUserId\",\nCOUNT(DISTINCT uc.\"characterId\") as \"totalCharacters\",\nCOUNT(DISTINCT CASE\nWHEN EXISTS (\nSELECT 1 FROM \"RaidCompletion\" rc\nWHERE rc.\"characterId\" = uc.\"characterId\"\nAND rc.\"raidDate\" = $1::date\nAND rc.\"raidType\" = 'Kirollas'\n) AND EXISTS (\nSELECT 1 FROM \"RaidCompletion\" rc\nWHERE rc.\"characterId\" = uc.\"characterId\"\nAND rc.\"raidDate\" = $1::date\nAND rc.\"raidType\" = 'Carno'\n)\nTHEN uc.\"characterId\"\nEND) as \"completedCharacters\"\nFROM user_characters uc\nGROUP BY uc.\"discordUserId\"\n)\nSELECT \"discordUserId\"\nFROM user_completions\nWHERE \"completedCharacters\" < \"totalCharacters\"\nORDER BY \"discordUserId\"") as (raidDate: string) => $runtime.TypedSql<getIncompleteUsers.Parameters, getIncompleteUsers.Result>

export namespace getIncompleteUsers {
  export type Parameters = [raidDate: string]
  export type Result = {
    discordUserId: string
  }
}
